{% extends 'base.html' %}
{% load static %}

{% block title %}My Products | Vendor Dashboard{% endblock %}

{% block content %}
<div class="container my-5">
  <!-- ðŸ§­ Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb small">
      <li class="breadcrumb-item"><a href="/" class="text-decoration-none text-primary">Home</a></li>
      <li class="breadcrumb-item"><a href="{% url 'vendor_dashboard' %}" class="text-decoration-none text-primary">Vendor Dashboard</a></li>
      <li class="breadcrumb-item active" aria-current="page">My Products</li>
    </ol>
  </nav>

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="fw-bold text-primary" style="font-family: 'Signika', sans-serif;">My Products</h4>
    <a href="{% url 'vendor_add_product' %}" class="btn btn-primary rounded-pill fw-semibold">
      <i class="fas fa-plus-circle me-2"></i>Add Product
    </a>
  </div>

  <!-- ðŸ› Product Table -->
  <div class="table-responsive shadow-sm rounded-4">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-primary text-center">
        <tr>
          <th>#</th>
          <th>Image</th>
          <th>Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody class="text-center">
        {% for product in products %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            {% if product.images.first %}
              <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" width="60" height="60" class="rounded">
            {% else %}
              <img src="{% static 'images/default-product.png' %}" alt="Default" width="60" height="60" class="rounded">
            {% endif %}
          </td>
          <td class="fw-semibold">{{ product.name|truncatechars:35 }}</td>
          <td>{{ product.category.name }}</td>
          <td>â‚¹{{ product.price }}</td>
          <td>{{ product.stock }}</td>
          <td>
            {% if product.is_active %}
              <span class="badge bg-success">Active</span>
            {% else %}
              <span class="badge bg-danger">Inactive</span>
            {% endif %}
          </td>
          <td>
            <a href="{% url 'vendor_edit_product' product.id %}" class="btn btn-sm btn-outline-primary rounded-pill px-3 me-2">
              <i class="fas fa-edit"></i>
            </a>
            <a href="{% url 'vendor_delete_product' product.id %}" class="btn btn-sm btn-outline-danger rounded-pill px-3" onclick="return confirm('Are you sure you want to delete this product?');">
              <i class="fas fa-trash"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-muted py-4">No products found. Start adding your first product!</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
